<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product List</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <!-- bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
          integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
          crossorigin="anonymous" />
</head>
<body class="bg-secondary">
<div class="d-flex justify-content-center">
<h2 class="text-white">Food4U Product List</h2>
</div>
<div class="mx-2" th:each="product: ${products}">
    <div class="alert alert-success alert-dismissible" role="alert" th:if="${product.stock < 50}">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span>
        </button>
        <strong><p th:text="'Product ID: ' + ${product.id} + ' stock is low.'"></p></strong>
    </div>
</div>
<div class="row">
    <div th:each="product: ${products}" class="col-md-4 mb-3">
        <img th:src="'data:image/jpeg;base64,' + ${product.encodedImage}" th:alt="${product.altText}" />
        <div class="card mx-2 bg-danger" style="width: 100%;">
            <div class="card-body">
                <p class="card-text" th:text="'Name: ' + ${product.food}"></p>
                <p class="card-text" th:text="'ID: ' + ${product.id}"></p>
                <p class="card-text" th:text="'Description: ' + ${product.description}"></p>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-danger" th:text="'Price: ' + ${product.encodedImage}"></li>
                <li class="list-group-item bg-danger" th:text="'Category: ' + ${product.category}"></li>
                <li class="list-group-item bg-danger" th:text="'Stock: ' + ${product.stock}"></li>
            </ul>
            <div class="card-body">
                <a href="#" class="card-link link-secondary" th:text="'Created at: ' + ${product.createdAt}"></a>
                </br>
                <a href="#" class="card-link link-secondary" th:text="'Updated at: ' + ${product.updatedAt}"></a>
                </br>
                <a th:href="@{/showUpdateForm(id=${product.id})}" class="btn btn-dark">Update</a>
            </div>
        </div>
    </div>
</div>
<div class="d-flex justify-content-center">
    <table class="table table-dark">
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Image</th>
            <th>Description</th>
            <th>Category</th>
            <th>Stock</th>
            <th>Alternate Text</th>
            <th>Created At</th>
            <th>Updated At</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
            <tr th:each="product: ${products}">
                <td th:text="${product.id}"></td>
                <td th:text="${product.food}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.image}"></td>
                <td th:text="${product.description}"></td>
                <td th:text="${product.category}"></td>
                <td th:text="${product.stock}"></td>
                <td th:text="${product.altText}"></td>
                <td th:text="${product.createdAt}"></td>
                <td th:text="${product.updatedAt}"></td>
                <td>
                    <a th:href="@{/showUpdateForm(id=${product.id})}" class="btn btn-info">Update</a>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</body>
</html>